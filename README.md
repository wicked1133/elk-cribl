# elk-cribl

a docker-compose project to run a full elk stack including cribl/LogStream.

Created this docker-compose project for my own usecase to test and evaluate elk with cribl. Feel free to use for your own purpose.

## Getting Started
`docker-compose up -d --build`

after building and all containers are up and running, the services are available on your local machine

- Kibana: http://localhost:5601
- Elasticsearch: http://localhost:9200
- Cribl/LogStream: http://localhost:19000

1. Login to cribl with admin:admin and enable the in_elastic source on port 10080 and add (or generate) the authentication token based on the filebeat.yml configuration file.
2. Setup a destination to elasticsearch
3. Change the main pipeline to your created elasticsearch (not to devnull as it was preset)
4. Login to Kibana to create an index pattern named "filebeat-*"

and you should be good to go!
for more information see the documentation: https://docs.cribl.io/docs/sources-elastic

## Addition containers

There are two addition container images running
- nginx (to generate logfiles)
- fakelogs (generates Logfile every 2 seconds) --> see docker hub for more information: https://hub.docker.com/r/mingrammer/flog

## Filebeat

Filebeat is running as a own container, which in real use cases filebeat would run on the host where it collects the logs/data.

### Manually add logs
Just add any `.log` file manually or generated by any application in the target folder `filebeat/logs` to get streamed to cribl and elk.
